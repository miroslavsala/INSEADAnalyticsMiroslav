





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://assets-cdn.github.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-521cbf980c80.css" integrity="sha512-Uhy/mAyAx1HfsenmjQ85ASpOk5bjt2Ay03pNeixXIvkHlEm5S+N4u0HWfDGhvsGYx4bGyviXWGGPZeIffqYcNA==" media="all" rel="stylesheet" />
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-be0481bef7d9.css" integrity="sha512-vgSBvvfZP2Kl3LF7M/gHnUD7GKfHl7aTSB55Cjr6xHkxaP/InJ41AXLEEy+6mArnvt2HJPmZYqGoIRqAZg352Q==" media="all" rel="stylesheet" />
  
  
  
  

  <meta name="viewport" content="width=device-width">
  
  <title>INSEADAnalytics/ClassificationProcessCreditCardDefault.Rmd at master Â· InseadDataAnalytics/INSEADAnalytics</title>
  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta content="https://avatars3.githubusercontent.com/u/6098619?s=400&amp;v=4" property="og:image" /><meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="InseadDataAnalytics/INSEADAnalytics" property="og:title" /><meta content="https://github.com/InseadDataAnalytics/INSEADAnalytics" property="og:url" /><meta content="Contribute to INSEADAnalytics development by creating an account on GitHub." property="og:description" />

  <link rel="assets" href="https://assets-cdn.github.com/">
  <link rel="web-socket" href="wss://live.github.com/_sockets/VjI6MjQ2MTgxNzAyOjE3OGUzYzE3ZGJhZWE3ZjQ4YTE2N2Q2MmY1ZjVlNWZhODYwYjZkYWIzMDk5NWNiODIzZjYzZWU0MjBmNjQ5YjM=--1aac00cb0982738f2213e577b03b3271da5f5586">
  <meta name="pjax-timeout" content="1000">
  <link rel="sudo-modal" href="/sessions/sudo_modal">
  <meta name="request-id" content="C1B4:AE11:2BBA4C:4007D2:5A79577F" data-pjax-transient>
  

  <meta name="selected-link" value="repo_source" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">
    <meta name="google-analytics" content="UA-3769691-2">

<meta content="collector.githubapp.com" name="octolytics-host" /><meta content="github" name="octolytics-app-id" /><meta content="https://collector.githubapp.com/github-external/browser_event" name="octolytics-event-url" /><meta content="C1B4:AE11:2BBA4C:4007D2:5A79577F" name="octolytics-dimension-request_id" /><meta content="sea" name="octolytics-dimension-region_edge" /><meta content="iad" name="octolytics-dimension-region_render" /><meta content="24554461" name="octolytics-actor-id" /><meta content="miroslavsala" name="octolytics-actor-login" /><meta content="b6f0ca74ecdf8e8297275d185054a3b388005911821ae2dda0cb750b626ea7fe" name="octolytics-actor-hash" />
<meta content="https://github.com/hydro_browser_events" name="hydro-events-url" />
<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location" />




  <meta class="js-ga-set" name="dimension1" content="Logged In">


  

      <meta name="hostname" content="github.com">
  <meta name="user-login" content="miroslavsala">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="Yjk1ZGRjYWY1ZTNhODI2MDlmZGJkMTFkNjQ2YjQ0Y2FiNjIyYmJjYWE0ZTVlMzMzMTg0N2NmYWQzNzllZTFmYXx7InJlbW90ZV9hZGRyZXNzIjoiMjE4LjE4Ni4yMDkuMTk2IiwicmVxdWVzdF9pZCI6IkMxQjQ6QUUxMToyQkJBNEM6NDAwN0QyOjVBNzk1NzdGIiwidGltZXN0YW1wIjoxNTE3OTAxNzExLCJob3N0IjoiZ2l0aHViLmNvbSJ9">

    <meta name="enabled-features" content="UNIVERSE_BANNER,MULTIPLE_ATTRIBUTION,FREE_TRIALS,MARKETPLACE_HERO_CARD_UPLOADER,CONTRIBUTOR_FLAGGED_CONTENT">

  <meta name="html-safe-nonce" content="452a3fe1bf10dcfc0bee9a13cfba7705d4c1d728">

  <meta http-equiv="x-pjax-version" content="fb7cbc0f48107767b80fc7fe02037de1">
  

      <link href="https://github.com/InseadDataAnalytics/INSEADAnalytics/commits/master.atom" rel="alternate" title="Recent Commits to INSEADAnalytics:master" type="application/atom+xml">

  <meta name="description" content="Contribute to INSEADAnalytics development by creating an account on GitHub.">
  <meta name="go-import" content="github.com/InseadDataAnalytics/INSEADAnalytics git https://github.com/InseadDataAnalytics/INSEADAnalytics.git">

  <meta content="6098619" name="octolytics-dimension-user_id" /><meta content="InseadDataAnalytics" name="octolytics-dimension-user_login" /><meta content="15819896" name="octolytics-dimension-repository_id" /><meta content="InseadDataAnalytics/INSEADAnalytics" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="15819896" name="octolytics-dimension-repository_network_root_id" /><meta content="InseadDataAnalytics/INSEADAnalytics" name="octolytics-dimension-repository_network_root_nwo" /><meta content="false" name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" />


    <link rel="canonical" href="https://github.com/InseadDataAnalytics/INSEADAnalytics/blob/master/CourseSessions/ClassificationProcessCreditCardDefault.Rmd" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" class="js-site-favicon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



  </head>

  <body class="logged-in env-production page-blob">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="bg-black text-white p-3 show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        
<header class="Header  f5" role="banner">
  <div class="d-flex px-3 flex-justify-between container-lg">
    <div class="d-flex flex-justify-between">
      <a class="header-logo-invertocat" href="https://github.com/" data-hotkey="g d" aria-label="Homepage" data-ga-click="Header, go to dashboard, icon:logo">
  <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>


    </div>

    <div class="HeaderMenu d-flex flex-justify-between flex-auto">
      <div class="d-flex">
            <div class="">
              <div class="header-search scoped-search site-scoped-search js-site-search" role="search">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/InseadDataAnalytics/INSEADAnalytics/search" class="js-site-search-form" data-scoped-search-url="/InseadDataAnalytics/INSEADAnalytics/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
    <label class="form-control header-search-wrapper js-chromeless-input-container">
        <a href="/InseadDataAnalytics/INSEADAnalytics/blob/master/CourseSessions/ClassificationProcessCreditCardDefault.Rmd" class="header-search-scope no-underline">This repository</a>
      <input type="text"
        class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable"
        data-hotkey="s"
        name="q"
        value=""
        placeholder="Search"
        aria-label="Search this repository"
        data-unscoped-placeholder="Search GitHub"
        data-scoped-placeholder="Search"
        autocapitalize="off">
        <input type="hidden" class="js-site-search-type-field" name="type" >
    </label>
</form></div>

            </div>

          <ul class="d-flex pl-2 flex-items-center text-bold list-style-none" role="navigation">
            <li>
              <a href="/pulls" aria-label="Pull requests you created" class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:pulls context:user" data-hotkey="g p" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls">
                Pull requests
</a>            </li>
            <li>
              <a href="/issues" aria-label="Issues you created" class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:issues context:user" data-hotkey="g i" data-selected-links="/issues /issues/assigned /issues/mentioned /issues">
                Issues
</a>            </li>
                <li>
                  <a href="/marketplace" class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-selected-links=" /marketplace">
                    Marketplace
</a>                </li>
            <li>
              <a href="/explore" class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore">
                Explore
</a>            </li>
          </ul>
      </div>

      <div class="d-flex">
        
<ul class="user-nav d-flex flex-items-center list-style-none" id="user-links">
  <li class="dropdown js-menu-container">
    <span class="d-inline-block  px-2">
      

    </span>
  </li>

  <li class="dropdown js-menu-container">
    <details class="dropdown-details details-reset js-dropdown-details d-flex px-2 flex-items-center">
      <summary class="HeaderNavlink"
         aria-label="Create newâ¦"
         data-ga-click="Header, create new, icon:add">
        <svg aria-hidden="true" class="octicon octicon-plus float-left mr-1 mt-1" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5z"/></svg>
        <span class="dropdown-caret mt-1"></span>
      </summary>

      <ul class="dropdown-menu dropdown-menu-sw">
        
<a class="dropdown-item" href="/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a class="dropdown-item" href="/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a class="dropdown-item" href="/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>



  <div class="dropdown-divider"></div>
  <div class="dropdown-header">
    <span title="InseadDataAnalytics/INSEADAnalytics">This repository</span>
  </div>
    <a class="dropdown-item" href="/InseadDataAnalytics/INSEADAnalytics/issues/new" data-ga-click="Header, create new issue">
      New issue
    </a>

      </ul>
    </details>
  </li>

  <li class="dropdown js-menu-container">

    <details class="dropdown-details details-reset js-dropdown-details d-flex pl-2 flex-items-center">
      <summary class="HeaderNavlink name mt-1"
        aria-label="View profile and more"
        data-ga-click="Header, show menu, icon:avatar">
        <img alt="@miroslavsala" class="avatar float-left mr-1" src="https://avatars3.githubusercontent.com/u/24554461?s=40&amp;v=4" height="20" width="20">
        <span class="dropdown-caret"></span>
      </summary>

      <ul class="dropdown-menu dropdown-menu-sw">
        <li class="dropdown-header header-nav-current-user css-truncate">
          Signed in as <strong class="css-truncate-target">miroslavsala</strong>
        </li>

        <li class="dropdown-divider"></li>

        <li><a class="dropdown-item" href="/miroslavsala" data-ga-click="Header, go to profile, text:your profile">
          Your profile
        </a></li>
        <li><a class="dropdown-item" href="/miroslavsala?tab=stars" data-ga-click="Header, go to starred repos, text:your stars">
          Your stars
        </a></li>
          <li><a class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, your gists, text:your gists">Your Gists</a></li>

        <li class="dropdown-divider"></li>

        <li><a class="dropdown-item" href="https://help.github.com" data-ga-click="Header, go to help, text:help">
          Help
        </a></li>

        <li><a class="dropdown-item" href="/settings/profile" data-ga-click="Header, go to settings, icon:settings">
          Settings
        </a></li>

        <li><!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/logout" class="logout-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="5Q/c5Fbgoo2RjOBfrOB6owrTt7qH2BtyYfzUrslWOraVR2P7D9ae6EgwTXXvrVHDRiK7MtkHdgf8bOYUeigLPA==" /></div>
          <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout">
            Sign out
          </button>
        </form></li>
      </ul>
    </details>
  </li>
</ul>


        <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/logout" class="sr-only right-0" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="2aMYhsYo0dag3nzL4WCzYL1rsPvv2M/Zbye530FjLcap66eZnx7ts3li0eGiLZgA8Zq8c7EHoqzyt4tl8h0cTA==" /></div>
          <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout">
            Sign out
          </button>
</form>      </div>
    </div>
  </div>
</header>

      

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">
</div>



  <div role="main" class="application-main ">
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <div id="js-repo-pjax-container" data-pjax-container >
      




  



  <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav  ">
    <div class="repohead-details-container clearfix container">

      <ul class="pagehead-actions">
  <li>
        <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/notifications/subscribe" class="js-social-container" data-autosubmit="true" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="CGYKJ+a+roSbSzEjsRuGijWkzUSAVPmgXwiLcNmkKZDmVqOiTaYS+suJHZXdJOpP/Mstxq35FYBJcM9alFuKGQ==" /></div>      <input class="form-control" id="repository_id" name="repository_id" type="hidden" value="15819896" />

        <div class="select-menu js-menu-container js-select-menu">
          <a href="/InseadDataAnalytics/INSEADAnalytics/subscription"
            class="btn btn-sm btn-with-count select-menu-button js-menu-target"
            role="button"
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Toggle repository notifications menu"
            data-ga-click="Repository, click Watch settings, action:blob#show">
            <span class="js-select-button">
                <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                Watch
            </span>
          </a>
          <a class="social-count js-social-count"
            href="/InseadDataAnalytics/INSEADAnalytics/watchers"
            aria-label="43 users are watching this repository">
            43
          </a>

        <div class="select-menu-modal-holder">
          <div class="select-menu-modal subscription-menu-modal js-menu-content">
            <div class="select-menu-header js-navigation-enable" tabindex="-1">
              <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
              <span class="select-menu-title">Notifications</span>
            </div>

              <div class="select-menu-list js-navigation-container" role="menu">

                <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
                  <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
                  <div class="select-menu-item-text">
                    <input checked="checked" id="do_included" name="do" type="radio" value="included" />
                    <span class="select-menu-item-heading">Not watching</span>
                    <span class="description">Be notified when participating or @mentioned.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                      Watch
                    </span>
                  </div>
                </div>

                <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
                  <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
                  <div class="select-menu-item-text">
                    <input id="do_subscribed" name="do" type="radio" value="subscribed" />
                    <span class="select-menu-item-heading">Watching</span>
                    <span class="description">Be notified of all conversations.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                        Unwatch
                    </span>
                  </div>
                </div>

                <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
                  <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
                  <div class="select-menu-item-text">
                    <input id="do_ignore" name="do" type="radio" value="ignore" />
                    <span class="select-menu-item-heading">Ignoring</span>
                    <span class="description">Never be notified.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg aria-hidden="true" class="octicon octicon-mute" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"/></svg>
                        Stop ignoring
                    </span>
                  </div>
                </div>

              </div>

            </div>
          </div>
        </div>
</form>
  </li>

  <li>
    
  <div class="js-toggler-container js-social-container starring-container ">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/InseadDataAnalytics/INSEADAnalytics/unstar" class="starred js-social-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="U0QJ/j9w2XQnZC4Lff34Mm0hWSZAYyrNy5Roun8UomXXkM6D+ToFMRNWyUmkQmODKz7iCcIKKxeX1ZtrWbvT1A==" /></div>
      <input type="hidden" name="context" value="repository"></input>
      <button
        type="submit"
        class="btn btn-sm btn-with-count js-toggler-target"
        aria-label="Unstar this repository" title="Unstar InseadDataAnalytics/INSEADAnalytics"
        data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar">
        <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"/></svg>
        Unstar
      </button>
        <a class="social-count js-social-count" href="/InseadDataAnalytics/INSEADAnalytics/stargazers"
           aria-label="42 users starred this repository">
          42
        </a>
</form>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/InseadDataAnalytics/INSEADAnalytics/star" class="unstarred js-social-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="kwMK3fDKwmZa/Ig2d2WD5TDu3ZqcWNQjJ7O5ylcCKjxyo7TkQeOqMLlPVlgcfz803cpaN6xf7XLrO28wC5NPsg==" /></div>
      <input type="hidden" name="context" value="repository"></input>
      <button
        type="submit"
        class="btn btn-sm btn-with-count js-toggler-target"
        aria-label="Star this repository" title="Star InseadDataAnalytics/INSEADAnalytics"
        data-ga-click="Repository, click star button, action:blob#show; text:Star">
        <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"/></svg>
        Star
      </button>
        <a class="social-count js-social-count" href="/InseadDataAnalytics/INSEADAnalytics/stargazers"
           aria-label="42 users starred this repository">
          42
        </a>
</form>  </div>

  </li>

  <li>
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/InseadDataAnalytics/INSEADAnalytics/fork" class="btn-with-count" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="FpLAlLyG+w+Ginbwd0TB2T7ZLPjjkN2QZPl89O4i/Kw3nu6J+3m0r+ISkztyE1GP04aCgL1SrCmzL2Aq4acqbA==" /></div>
            <button
                type="submit"
                class="btn btn-sm btn-with-count"
                data-ga-click="Repository, show fork modal, action:blob#show; text:Fork"
                title="Fork your own copy of InseadDataAnalytics/INSEADAnalytics to your account"
                aria-label="Fork your own copy of InseadDataAnalytics/INSEADAnalytics to your account">
              <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
              Fork
            </button>
</form>
    <a href="/InseadDataAnalytics/INSEADAnalytics/network" class="social-count"
       aria-label="564 users forked this repository">
      564
    </a>
  </li>
</ul>

      <h1 class="public ">
  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a href="/InseadDataAnalytics" class="url fn" rel="author">InseadDataAnalytics</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/InseadDataAnalytics/INSEADAnalytics" data-pjax="#js-repo-pjax-container">INSEADAnalytics</a></strong>

</h1>

    </div>
    
<nav class="reponav js-repo-nav js-sidenav-container-pjax container"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
     role="navigation"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a href="/InseadDataAnalytics/INSEADAnalytics" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /InseadDataAnalytics/INSEADAnalytics" itemprop="url">
      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a href="/InseadDataAnalytics/INSEADAnalytics/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /InseadDataAnalytics/INSEADAnalytics/issues" itemprop="url">
        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">51</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a href="/InseadDataAnalytics/INSEADAnalytics/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /InseadDataAnalytics/INSEADAnalytics/pulls" itemprop="url">
      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">11</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <a href="/InseadDataAnalytics/INSEADAnalytics/projects" class="js-selected-navigation-item reponav-item" data-hotkey="g b" data-selected-links="repo_projects new_repo_project repo_project /InseadDataAnalytics/INSEADAnalytics/projects">
      <svg aria-hidden="true" class="octicon octicon-project" height="16" version="1.1" viewBox="0 0 15 16" width="15"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      Projects
      <span class="Counter" >0</span>
</a>
    <a href="/InseadDataAnalytics/INSEADAnalytics/wiki" class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /InseadDataAnalytics/INSEADAnalytics/wiki">
      <svg aria-hidden="true" class="octicon octicon-book" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"/></svg>
      Wiki
</a>

  <a href="/InseadDataAnalytics/INSEADAnalytics/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph pulse /InseadDataAnalytics/INSEADAnalytics/pulse">
    <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
    Insights
</a>

</nav>


  </div>

<div class="container new-discussion-timeline experiment-repo-nav  ">
  <div class="repository-content ">

    
  <a href="/InseadDataAnalytics/INSEADAnalytics/blob/e439c48db6f05149ea4000566b466360159b4be2/CourseSessions/ClassificationProcessCreditCardDefault.Rmd" class="d-none js-permalink-shortcut" data-hotkey="y">Permalink</a>

  <!-- blob contrib key: blob_contributors:v21:3a2e7544f215d80d565e317a0a7818ba -->

  <div class="file-navigation js-zeroclipboard-container">
    
<div class="select-menu branch-select-menu js-menu-container js-select-menu float-left">
  <button class=" btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w"
    
    type="button" aria-label="Switch branches or tags" aria-expanded="false" aria-haspopup="true">
      <i>Branch:</i>
      <span class="js-select-button css-truncate-target">master</span>
  </button>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax>

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
        <span class="select-menu-title">Switch branches/tags</span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Filter branches/tags" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Filter branches/tags">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" data-filter-placeholder="Filter branches/tags" class="js-select-menu-tab" role="tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tagâ¦" class="js-select-menu-tab" role="tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open "
               href="/InseadDataAnalytics/INSEADAnalytics/blob/gh-pages/CourseSessions/ClassificationProcessCreditCardDefault.Rmd"
               data-name="gh-pages"
               data-skip-pjax="true"
               rel="nofollow">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                gh-pages
              </span>
            </a>
            <a class="select-menu-item js-navigation-item js-navigation-open selected"
               href="/InseadDataAnalytics/INSEADAnalytics/blob/master/CourseSessions/ClassificationProcessCreditCardDefault.Rmd"
               data-name="master"
               data-skip-pjax="true"
               rel="nofollow">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                master
              </span>
            </a>
        </div>

          <div class="select-menu-no-results">Nothing to show</div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>

    <div class="BtnGroup float-right">
      <a href="/InseadDataAnalytics/INSEADAnalytics/find/master"
            class="js-pjax-capture-input btn btn-sm BtnGroup-item"
            data-pjax
            data-hotkey="t">
        Find file
      </a>
      <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm BtnGroup-item tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button>
    </div>
    <div class="breadcrumb js-zeroclipboard-target">
      <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/InseadDataAnalytics/INSEADAnalytics" data-pjax="true"><span>INSEADAnalytics</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a href="/InseadDataAnalytics/INSEADAnalytics/tree/master/CourseSessions" data-pjax="true"><span>CourseSessions</span></a></span><span class="separator">/</span><strong class="final-path">ClassificationProcessCreditCardDefault.Rmd</strong>
    </div>
  </div>


  
  <div class="commit-tease">
      <span class="float-right">
        <a class="commit-tease-sha" href="/InseadDataAnalytics/INSEADAnalytics/commit/603132fc7719621f4fb32105f4763596439c4109" data-pjax>
          603132f
        </a>
        <relative-time datetime="2018-01-16T00:44:05Z">Jan 16, 2018</relative-time>
      </span>
      <div>
        <img alt="@szoumpou" class="avatar" height="20" src="https://avatars1.githubusercontent.com/u/19541382?s=40&amp;v=4" width="20" />
        <a href="/szoumpou" class="user-mention" rel="contributor">szoumpou</a>
          <a href="/InseadDataAnalytics/INSEADAnalytics/commit/603132fc7719621f4fb32105f4763596439c4109" class="message" data-pjax="true" title="classif case .Rmd">classif case .Rmd</a>
      </div>

    <div class="commit-tease-contributors">
      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box">
        <strong>1</strong>
         contributor
      </button>
      
    </div>

    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list" data-facebox-id="facebox-description">
          <li class="facebox-user-list-item">
            <img alt="@szoumpou" height="24" src="https://avatars0.githubusercontent.com/u/19541382?s=48&amp;v=4" width="24" />
            <a href="/szoumpou">szoumpou</a>
          </li>
      </ul>
    </div>
  </div>


  <div class="file">
    <div class="file-header">
  <div class="file-actions">

    <div class="BtnGroup">
      <a href="/InseadDataAnalytics/INSEADAnalytics/raw/master/CourseSessions/ClassificationProcessCreditCardDefault.Rmd" class="btn btn-sm BtnGroup-item" id="raw-url">Raw</a>
        <a href="/InseadDataAnalytics/INSEADAnalytics/blame/master/CourseSessions/ClassificationProcessCreditCardDefault.Rmd" class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b">Blame</a>
      <a href="/InseadDataAnalytics/INSEADAnalytics/commits/master/CourseSessions/ClassificationProcessCreditCardDefault.Rmd" class="btn btn-sm BtnGroup-item" rel="nofollow">History</a>
    </div>

        <a class="btn-octicon tooltipped tooltipped-nw"
           href="https://desktop.github.com"
           aria-label="Open this file in GitHub Desktop"
           data-ga-click="Repository, open with desktop, type:windows">
            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M15 2H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5.34c-.25.61-.86 1.39-2.34 2h8c-1.48-.61-2.09-1.39-2.34-2H15c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 9H1V3h14v8z"/></svg>
        </a>

          <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/InseadDataAnalytics/INSEADAnalytics/edit/master/CourseSessions/ClassificationProcessCreditCardDefault.Rmd" class="inline-form js-update-url-with-hash" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="7dv7w+ebydbSgCbMqjCwBCsoaeruZDp5+zjhDsM1adDIAWnb03DxuGxDpddynqBUA8LF/ZrsDCXHAU+jsGPiGw==" /></div>
            <button class="btn-octicon tooltipped tooltipped-nw" type="submit"
              aria-label="Edit the file in your fork of this project" data-hotkey="e" data-disable-with>
              <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>
            </button>
</form>
        <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/InseadDataAnalytics/INSEADAnalytics/delete/master/CourseSessions/ClassificationProcessCreditCardDefault.Rmd" class="inline-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="gZ/oMP1WlBOCyvpWR5gbFFes3v3X51MZmuEcR674q1U6On5hxDJIDVLSAJHBOXfIS6vLw8Q7s3N3tfuDFLv/QQ==" /></div>
          <button class="btn-octicon btn-octicon-danger tooltipped tooltipped-nw" type="submit"
            aria-label="Delete the file in your fork of this project" data-disable-with>
            <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"/></svg>
          </button>
</form>  </div>

  <div class="file-info">
      965 lines (736 sloc)
      <span class="file-info-divider"></span>
    59.1 KB
  </div>
</div>

    
  <div id="readme" class="readme blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="text"><table data-table-type="yaml-metadata">
  <thead>
  <tr>
  <th>title</th>
  <th>author</th>
  <th>output</th>
  <th>always_allow_html</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>Classification for Credit Card Default</div></td>
  <td><div>Theos Evgeniou, Spyros Zoumpoulis</div></td>
  <td><div><table>
  <thead>
  <tr>
  <th>html_document</th>
  <th>pdf_document</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div><table>
  <thead>
  <tr>
  <th>css</th>
  <th>theme</th>
  <th>toc</th>
  <th>toc_float</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>../AnalyticsStyles/default.css</div></td>
  <td><div>paper</div></td>
  <td><div>true</div></td>
  <td><div><table>
  <thead>
  <tr>
  <th>collapsed</th>
  <th>smooth_scroll</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>false</div></td>
  <td><div>true</div></td>
  </tr>
  </tbody>
</table>
</div></td>
  </tr>
  </tbody>
</table>
</div></td>
  <td><div><table>
  <thead>
  <tr>
  <th>includes</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div><table>
  <thead>
  <tr>
  <th>in_header</th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td><div>../AnalyticsStyles/default.sty</div></td>
  </tr>
  </tbody>
</table>
</div></td>
  </tr>
  </tbody>
</table>
</div></td>
  </tr>
  </tbody>
</table>
</div></td>
  <td><div>true</div></td>
  </tr>
  </tbody>
</table>


<pre lang="{r"><code>make_pdf_file = 0 # SET THIS TO 1 IF WE COMPILE PDF FILE, 0 OTHERWISE (FOR HTML)

source("../AnalyticsLibraries/library.R")
source("../AnalyticsLibraries/heatmapOutput.R")

# Package options
ggthemr('fresh')  # ggplot theme
opts_knit$set(progress=FALSE, verbose=FALSE)
opts_chunk$set(echo=FALSE, fig.align="center", fig.width=10, fig.height=6.2)
options(knitr.kable.NA = '')
</code></pre>
<pre lang="{r"><code># Please ENTER the filename
datafile_name = "../Data/UCI_Credit_Card.csv"
ProjectData &lt;- read.csv(datafile_name)
# We turn the data into data.matrix class so that we can easier manipulate it
ProjectData &lt;- data.matrix(ProjectData)

# Please ENTER the dependent variable (class).
# Please use numbers, not column names. E.g., 82 uses the 82nd column as the dependent variable.
# You need to make sure that dependent variable takes only two values: 0 and 1.
dependent_variable = 25

# Please ENTER the attributes to use as independent variables. 
# Please use numbers, not column names. E.g., c(1:5, 7, 8) uses columns 1,2,3,4,5,7,8.
independent_variables = c(1:24) # use all the available attributes

dependent_variable = unique(sapply(dependent_variable,function(i) min(ncol(ProjectData), max(i,1))))
independent_variables = unique(sapply(independent_variables,function(i) min(ncol(ProjectData), max(i,1))))

if (length(unique(ProjectData[,dependent_variable])) !=2){
  cat("\n*****\n BE CAREFUL, THE DEPENDENT VARIABLE TAKES MORE THAN 2 VALUES")
  cat("\nSplitting it around its median...\n*****\n ")
  new_dependent = ProjectData[,dependent_variable] &gt;= median(ProjectData[,dependent_variable])
  ProjectData[,dependent_variable] &lt;- 1*new_dependent
}

# Please ENTER the probability threshold above which an observation is predicted as class 1:
Probability_Threshold = 0.22 # between 0 and 1

# Please ENTER the percentage of data used for estimation
estimation_data_percent = 80
validation_data_percent = 10
test_data_percent = 100-estimation_data_percent-validation_data_percent

# Please ENTER 1 if you want to randomly split the data in estimation and validation/test
random_sampling = 1

# Tree parameter
# Please ENTER the tree (CART) complexity control cp (e.g. 0.0001 to 0.02, depending on the data)
CART_cp = 0.0025
CART_control = rpart.control(cp = CART_cp)

# Please ENTER the words for the business interpretation of class 1 and class 0:
class_1_interpretation = "default"
class_0_interpretation = "no default"

# Please ENTER the profit/cost values for correctly classified and misclassified data:
actual_1_predict_1 = 0
actual_1_predict_0 = -100000
actual_0_predict_1 = 0
actual_0_predict_0 = 20000

Profit_Matrix = matrix(c(actual_1_predict_1, actual_0_predict_1, actual_1_predict_0, actual_0_predict_0), ncol=2)
colnames(Profit_Matrix) &lt;- c(paste("Predict 1 (", class_1_interpretation, ")", sep = ""), paste("Predict 0 (", class_0_interpretation, ")", sep = ""))
rownames(Profit_Matrix) &lt;- c(paste("Actual 1 (", class_1_interpretation, ")", sep = ""), paste("Actual 0 (", class_0_interpretation, ")", sep = ""))

# Please ENTER the maximum number of observations to show in the report and slides 
# (DEFAULT is 50. If the number is large the report and slides may not be generated - very slow or will crash!!)
max_data_report = 10 
</code></pre>
<h1><a href="#the-business-context" aria-hidden="true" class="anchor" id="user-content-the-business-context"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Business Context</h1>
<p>A Taiwan-based credit card issuer wants to better predict the likelihood of default for its customers, as well as identify the key drivers that determine this likelihood. This would inform the issuer's decisions on who to give a credit card to and what credit limit to provide. It would also help the issuer have a better understanding of their current and potential customers, which would inform their future strategy, including their planning of offering targeted credit products to their customers.</p>
<hr>\clearpage
<h1><a href="#the-data" aria-hidden="true" class="anchor" id="user-content-the-data"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Data</h1>
<p>(Data source: <a href="https://www.kaggle.com/uciml/default-of-credit-card-clients-dataset" rel="nofollow">https://www.kaggle.com/uciml/default-of-credit-card-clients-dataset</a>. We acknowledge the following:
Lichman, M. (2013). UCI Machine Learning Repository [<a href="http://archive.ics.uci.edu/ml">http://archive.ics.uci.edu/ml</a>]. Irvine, CA: University of California, School of Information and Computer Science.)</p>
<p>The credit card issuer has gathered information on <code>r nrow(ProjectData)</code> customers. The dataset contains information on <code>r length(independent_variables)</code> variables, including demographic factors, credit data, history of payment, and bill statements of credit card customers from April 2005 to September 2005, as well as information on the outcome: did the customer default or not?</p>
<table>
<thead>
<tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">ID</td>
<td align="left">ID of each client</td>
</tr>
<tr>
<td align="left">LIMIT_BAL</td>
<td align="left">Amount of given credit in NT dollars (includes individual and family/supplementary credit)</td>
</tr>
<tr>
<td align="left">SEX</td>
<td align="left">Gender (1=male, 2=female)</td>
</tr>
<tr>
<td align="left">EDUCATION</td>
<td align="left">(1=graduate school, 2=university, 3=high school, 4=others, 5=unknown, 6=unknown)</td>
</tr>
<tr>
<td align="left">MARRIAGE</td>
<td align="left">Marital status (1=married, 2=single, 3=others)</td>
</tr>
<tr>
<td align="left">AGE</td>
<td align="left">Age in years</td>
</tr>
<tr>
<td align="left">PAY_0</td>
<td align="left">Repayment status in September, 2005 (-2=no consumption, -1=pay duly, 0=the use of revolving credit, 1=payment delay for one month, 2=payment delay for two months, ... 8=payment delay for eight months, 9=payment delay for nine months and above)</td>
</tr>
<tr>
<td align="left">PAY_2</td>
<td align="left">Repayment status in August, 2005 (scale same as above)</td>
</tr>
<tr>
<td align="left">PAY_3</td>
<td align="left">Repayment status in July, 2005 (scale same as above)</td>
</tr>
<tr>
<td align="left">PAY_4</td>
<td align="left">Repayment status in June, 2005 (scale same as above)</td>
</tr>
<tr>
<td align="left">PAY_5</td>
<td align="left">Repayment status in May, 2005 (scale same as above)</td>
</tr>
<tr>
<td align="left">PAY_6</td>
<td align="left">Repayment status in April, 2005 (scale same as above)</td>
</tr>
<tr>
<td align="left">BILL_AMT1</td>
<td align="left">Amount of bill statement in September, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">BILL_AMT2</td>
<td align="left">Amount of bill statement in August, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">BILL_AMT3</td>
<td align="left">Amount of bill statement in July, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">BILL_AMT4</td>
<td align="left">Amount of bill statement in June, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">BILL_AMT5</td>
<td align="left">Amount of bill statement in May, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">BILL_AMT6</td>
<td align="left">Amount of bill statement in April, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">PAY_AMT1</td>
<td align="left">Amount of previous payment in September, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">PAY_AMT2</td>
<td align="left">Amount of previous payment in August, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">PAY_AMT3</td>
<td align="left">Amount of previous payment in July, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">PAY_AMT4</td>
<td align="left">Amount of previous payment in June, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">PAY_AMT5</td>
<td align="left">Amount of previous payment in May, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">PAY_AMT6</td>
<td align="left">Amount of previous payment in April, 2005 (NT dollar)</td>
</tr>
<tr>
<td align="left">default.payment.next.month</td>
<td align="left">Default payment (1=yes, 0=no)</td>
</tr></tbody></table>
<p>Let's look into the data for a few customers. This is how the first <code>r min(max_data_report, nrow(ProjectData))</code> out of the total of <code>r nrow(ProjectData)</code> rows look like (transposed, for convenience):</p>
<pre lang="{r"><code>knitr::kable({
  df &lt;- t(head(round(ProjectData[,independent_variables],2), max_data_report))
  colnames(df) &lt;- sprintf("%02d", 1:ncol(df))
  df
})
</code></pre>
<hr>\clearpage
<h1><a href="#a-process-for-classification" aria-hidden="true" class="anchor" id="user-content-a-process-for-classification"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A Process for Classification</h1>
<blockquote>
<p>It is important to remember that data analytics projects require a delicate balance between experimentation, intuition, and following a process. The value of following a process is so as to avoid getting fooled by randomness in data and finding "results and patterns" that are mainly driven by our own biases and not by the facts/data themselves.</p>
</blockquote>
<p><em>There is no single best process</em> for classification. However, we have to start somewhere, so we will use the following process:</p>
<ol>
<li>Create an estimation sample and two validation samples by splitting the data into three groups. Steps 2-5 below will then be performed only on the estimation and the first validation data. You should only do step 6 once on the second validation data, also called <strong>test data</strong>, and only report/use the performance on that (second validation) data to make final business decisions.</li>
<li>Set up the dependent variable (as a categorical 0-1 variable; multi-class classification is also feasible, and similar, but we do not explore it in this note).</li>
<li>Make a preliminary assessment of the relative importance of the explanatory variables using visualization tools and simple descriptive statistics.</li>
<li>Estimate the classification model using the estimation data, and interpret the results.</li>
<li>Assess the accuracy of classification in the first validation sample, possibly repeating steps 2-5 a few times changing the classifier in different ways to increase performance.</li>
<li>Finally, assess the accuracy of classification in the second validation sample. You should eventually use and report all relevant performance measures and plots on this second validation sample only.</li>
</ol>
<p>Let's follow these steps.</p>
<h2><a href="#step-1-split-the-data" aria-hidden="true" class="anchor" id="user-content-step-1-split-the-data"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 1: Split the data</h2>
<p>It is very important that you (or the data scientists working on the project) finally measure and report the performance of the models on <strong>data that have not been used at all during the analysis, called "out-of-sample" or test data</strong> (steps 2-5 above). The idea is that in practice we want our models to be used for predicting the class of observations/data we have not seen yet (i.e., "the future data"): although the performance of a classification method may be high in the data used to estimate the model parameters, it may be significantly poorer on data not used for parameter estimation, such as the <strong>out-of-sample</strong> (future) data.</p>
<p>This is why we split the data into an estimation sample and two validation samples  - using some kind of randomized splitting technique. The second validation data mimic out-of-sample data, and the performance on this validation set is a better approximation of the performance one should expect in practice from the selected classification method. The estimation data and the first validation data are used during steps 2-5 (with a few iterations of these steps), while the second validation data is only used once at the very end before making final business decisions based on the analysis. The split can be, for example, 80% estimation, 10% validation, and 10% test data, depending on the number of observations - for example, when there is a lot of data, you may only keep a few hundreds of them for the validation and test sets, and use the rest for estimation.</p>
<p>While setting up the estimation and validation samples, you should also check that the same proportion of data from each class (i.e., customers who default versus not) are maintained in each sample. That is, you should maintain the same balance of the dependent variable categories as in the overall dataset.</p>
<p>For simplicity, in this note we will not iterate steps 2-5. In practice, however, we should usually iterate steps 2-5 a number of times using the first validation sample each time, and at the end make our final assessment of the classification model using the test sample only once.</p>
<pre lang="{r"><code>if (random_sampling){
  estimation_data_ids=sample.int(nrow(ProjectData),floor(estimation_data_percent*nrow(ProjectData)/100))
  non_estimation_data = setdiff(1:nrow(ProjectData),estimation_data_ids) #setdiff(x,y) returns the elements of x that are not in y
  validation_data_ids=non_estimation_data[sample.int(length(non_estimation_data), floor(validation_data_percent/(validation_data_percent+test_data_percent)*length(non_estimation_data)))]
  } else {
    estimation_data_ids=1:floor(estimation_data_percent*nrow(ProjectData)/100)
    non_estimation_data = setdiff(1:nrow(ProjectData),estimation_data_ids)
    validation_data_ids = (tail(estimation_data_ids,1)+1):(tail(estimation_data_ids,1) + floor(validation_data_percent/(validation_data_percent+test_data_percent)*length(non_estimation_data)))
    }

test_data_ids = setdiff(1:nrow(ProjectData), union(estimation_data_ids,validation_data_ids))

estimation_data=ProjectData[estimation_data_ids,]
validation_data=ProjectData[validation_data_ids,]
test_data=ProjectData[test_data_ids,]
</code></pre>
<p>We typically refer to the three data samples as <strong>estimation data</strong> (<code>r estimation_data_percent</code>% of the data in our case), <strong>validation data</strong>  (<code>r validation_data_percent</code>% of the data) and <strong>test data</strong> (the remaining <code>r 100 - estimation_data_percent - validation_data_percent</code>% of the data).</p>
<p>In our case we use <code>r nrow(estimation_data)</code> observations in the estimation data, <code>r nrow(validation_data)</code> in the validation data, and <code>r nrow(test_data)</code> in the test data.</p>
<h2><a href="#step-2-set-up-the-dependent-variable" aria-hidden="true" class="anchor" id="user-content-step-2-set-up-the-dependent-variable"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 2: Set up the dependent variable</h2>
<p>First, make sure the dependent variable is set up as a categorical 0-1 variable. In our illustrative example, we use the payment default (or no default) as the dependent variable.</p>
<p>The data however may not be always readily available with a categorical dependent variable. Suppose a retailer wants to understand what discriminates consumers who are  loyal versus those who are not. If they have data on the amount that customers spend in their store or the frequency of their purchases, they can create a categorical variable ("loyal vs. not loyal") by using a definition such as: "A loyal customer is one who spends more than X amount at the store and makes at least Y purchases a year". They can then code these loyal customers as "1" and the others as "0". They can choose the thresholds X and Y as they wish: a definition/decision that may have a big impact in the overall analysis. This decision can be the most crucial one of the whole data analysis: a wrong choice at this step may lead both to poor performance later as well as to no valuable insights. One should revisit the choice made at this step several times, iterating steps 2-3 and 2-5.</p>
<blockquote>
<p>Carefully deciding what the dependent 0/1 variable is can be the most critical choice of a classification analysis. This decision typically depends on contextual knowledge and needs to be revisited multiple times throughout a data analytics project.</p>
</blockquote>
<p>In our data the number of 0/1's in our estimation sample is as follows:</p>
<pre lang="{r"><code>class_percentages=matrix(c(sum(estimation_data[,dependent_variable]==1),sum(estimation_data[,dependent_variable]==0)), nrow=1); colnames(class_percentages)&lt;-c("Class 1", "Class 0")
rownames(class_percentages)&lt;-"# of Observations"
knitr::kable(class_percentages)
</code></pre>
<p>while in the validation sample they are:</p>
<pre lang="{r"><code>class_percentages=matrix(c(sum(validation_data[,dependent_variable]==1),sum(validation_data[,dependent_variable]==0)), nrow=1); colnames(class_percentages)&lt;-c("Class 1", "Class 0")
rownames(class_percentages)&lt;-"# of Observations"
knitr::kable(class_percentages)
</code></pre>
<h2><a href="#step-3-simple-analysis" aria-hidden="true" class="anchor" id="user-content-step-3-simple-analysis"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 3: Simple Analysis</h2>
<p>Good data analytics start with good contextual knowledge as well as a simple statistical and visual exploration of the data. In the case of classification, one can explore "simple classifications" by assessing how the classes differ along any of the independent variables. For example, these are the statistics of our independent variables across the two classes in the estimation data, class 1 ("default"):</p>
<pre lang="{r"><code>knitr::kable(round(my_summary(estimation_data[estimation_data[,dependent_variable]==1,independent_variables]),2))
</code></pre>
<p>and class 0 ("no default"):</p>
<pre lang="{r"><code>knitr::kable(round(my_summary(estimation_data[estimation_data[,dependent_variable]==0,independent_variables]),2))
</code></pre>
<p>The purpose of such an analysis by class is to get an initial idea about whether the classes are indeed separable as well as to understand which of the independent variables have most discriminatory power.</p>
<p>Notice however that</p>
<blockquote>
<p>Even though each independent variable may not differ across classes, classification may still be feasible: a (linear or nonlinear) combination of independent variables may still be discriminatory.</p>
</blockquote>
<p>A simple visualization tool to assess the discriminatory power of the independent variables are the <strong>box plots</strong>. A box plot visually indicates simple summary statistics of an independent variable (e.g. mean, median, top and bottom quantiles, min, max, etc.). For example consider the box plots for our estimation data for the repayment status variables, for class 1</p>
<pre lang="{r"><code># Please ENTER the selected independent variables for which to draw box plots. 
# Please use numbers, not column names. E.g., c(1:5, 7, 8) uses columns 1,2,3,4,5,7,8.
boxplots_independent_variables = c(7:12) # use only the PAY_ variables

DVvalues = unique(estimation_data[,dependent_variable])
x0 = estimation_data[which(estimation_data[,dependent_variable]==DVvalues[1]),boxplots_independent_variables]
x1 = estimation_data[which(estimation_data[,dependent_variable]==DVvalues[2]),boxplots_independent_variables]
colnames(x0) &lt;- 1:ncol(x0)
colnames(x1) &lt;- 1:ncol(x1)

swatch.default &lt;- as.character(swatch())
set_swatch(c(swatch.default[1], colorRampPalette(RColorBrewer::brewer.pal(12, "Paired"))(ncol(x1))))
ggplot(melt(cbind.data.frame(n=1:nrow(x1), x1), id="n"), aes(x=n, y=value, colour=variable)) + geom_boxplot(fill="#FFFFFF", size=0.66, position=position_dodge(1.1*nrow(x1)))
set_swatch(swatch.default)
</code></pre>
<p>and class 0:</p>
<pre lang="{r"><code>swatch.default &lt;- as.character(swatch())
set_swatch(c(swatch.default[1], colorRampPalette(RColorBrewer::brewer.pal(12, "Paired"))(ncol(x0))))
ggplot(melt(cbind.data.frame(n=1:nrow(x0), x0), id="n"), aes(x=n, y=value, colour=variable)) + geom_boxplot(fill="#FFFFFF", size=0.66, position=position_dodge(1.1*nrow(x0)))
set_swatch(swatch.default)
</code></pre>
<p><strong>Questions:</strong></p>
<ol>
<li>Draw the box plots for class 1 and class 0 for another set of independent variables of your choice.</li>
<li>Which independent variables appear to have the most discriminatory power?</li>
</ol>
<p><strong>Answers:</strong></p>
<ul>
<li></li>
<li></li>
</ul>
<h2><a href="#step-4-classification-and-interpretation" aria-hidden="true" class="anchor" id="user-content-step-4-classification-and-interpretation"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 4: Classification and Interpretation</h2>
<p>Once we decide which  dependent and independent variables to use (which can be revisited in later iterations), one can use a number of classification methods to develop a model that discriminates the different classes.</p>
<blockquote>
<p>Some of the widely used classification methods are:  classification and regression trees (CART), boosted trees, support vector machines, neural networks, nearest neighbors, logistic regression, lasso, random forests, deep learning methods, etc.</p>
</blockquote>
<p>In this note we will consider for simplicity only two classification methods: <strong>logistic regression</strong> and <strong>classification and regression trees (CART)</strong>. However, replacing them with other methods is relatively simple (although some knowledge of how these methods work is often necessary - see the R help command for the methods if needed). Understanding how these methods work is beyond the scope of this note - there are many references available online for all these classification methods.</p>
<p><strong>Logistic Regression</strong>: Logistic Regression is a method similar to linear regression except that the dependent variable is discrete (e.g., 0 or 1). <strong>Linear</strong> logistic regression estimates the coefficients of a linear model using the selected independent variables while optimizing a classification criterion. For example, this is the logistic regression parameters for our data:</p>
<pre lang="{r"><code># We first turn the data into data.frame's
estimation_data = data.frame(estimation_data)
validation_data = data.frame(validation_data)
test_data = data.frame(test_data)

formula_log=paste(colnames(estimation_data[,dependent_variable,drop=F]),paste(Reduce(paste,sapply(head(independent_variables,-1), function(i) paste(colnames(estimation_data)[i],"+",sep=""))),colnames(estimation_data)[tail(independent_variables,1)],sep=""),sep="~") # When drop is FALSE, the dimensions of the object are kept. head(x,-1) returns all but the last element of x.

logreg_solution &lt;- glm(formula_log, family=binomial(link="logit"),  data=estimation_data)
log_coefficients &lt;- round(summary(logreg_solution)$coefficients,1)

knitr::kable(round(log_coefficients,2))
</code></pre>
<p>Given a set of independent variables, the output of the estimated logistic regression (the sum of the products of the independent variables with the corresponding regression coefficients) can be used to assess the probability an observation belongs to one of the classes. Specifically, the regression output can be transformed into a probability of belonging to, say, class 1 for each observation. The estimated probability that a validation observation belongs to class 1 (e.g., the estimated probability that the customer defaults) for the first few validation observations, using the logistic regression above, is:</p>
<pre lang="{r"><code># Let's get the probabilities for the 3 types of data from the logistic regression
estimation_Probability_class1_log&lt;-predict(logreg_solution, type="response", newdata=estimation_data[,independent_variables])
validation_Probability_class1_log&lt;-predict(logreg_solution, type="response", newdata=validation_data[,independent_variables])
test_Probability_class1_log&lt;-predict(logreg_solution, type="response", newdata=test_data[,independent_variables])

# Let's get the decision of the logistic regression for the 3 types of data 
estimation_prediction_class_log=1*as.vector(estimation_Probability_class1_log &gt; Probability_Threshold)
validation_prediction_class_log=1*as.vector(validation_Probability_class1_log &gt; Probability_Threshold)
test_prediction_class_log=1*as.vector(test_Probability_class1_log &gt; Probability_Threshold)

Classification_Table=rbind(validation_data[,dependent_variable],validation_prediction_class_log,validation_Probability_class1_log)
rownames(Classification_Table)&lt;-c("Actual Class","Predicted Class","Probability of Class 1")
colnames(Classification_Table)&lt;- paste("Obs", 1:ncol(Classification_Table), sep=" ")

knitr::kable(head(t(round(Classification_Table,2)), max_data_report)) #t(x) returns the transpose of x
</code></pre>
<p>The default decision is to classify each observation in the group with the highest probability - but one can change this choice, as we discuss below.</p>
<p>Selecting the best subset of independent variables for logistic regression, a special case of the general problem of <strong>feature selection</strong>, is an iterative process where both the significance of the regression coefficients as well as the performance of the estimated logistic regression model on the first validation data are used as guidance. A number of variations are tested in practice, each leading to different performance.</p>
<p><strong>CART</strong>: CART is a widely used classification method largely because the estimated classification models are easy to interpret. This classification tool iteratively "splits" the data using the most discriminatory independent variable at each step, building a "tree" - as shown below - on the way. The CART methods <strong>limit the size of the tree</strong> using various statistical techniques in order to avoid <strong>overfitting the data</strong>. For example, using the rpart and rpart.control functions in R, we can limit the size of the tree by selecting the functions' <strong>complexity control</strong> parameter <strong>cp</strong>. (What this parameter does exactly is beyond the scope of this note. For the rpart and rpart.control functions in R, smaller values, e.g. cp=0.0001, lead to larger trees, as we will see next.)</p>
<blockquote>
<p>One of the biggest risks when developing classification models is overfitting: while it is always trivial to develop a model (e.g., a tree) that classifies any (estimation) dataset with no misclassification error at all, there is no guarantee that the quality of a classifier in out-of-sample data (e.g., in the validation data) will be close to that in the estimation data. Striking the right balance between "overfitting" and "underfitting" is one of the most important aspects in data analytics. While there are a number of statistical techniques to help us strike this balance - including the use of validation data - it is largely a combination of good statistical analysis and qualitative criteria (such as the interpretability and simplicity of the estimated models) that leads to classification models that work well in practice.</p>
</blockquote>
<p>Running a basic CART model with complexity control cp=<code>r CART_cp</code>,  leads to the following tree (<strong>NOTE</strong>: for better readability of the tree figures below,  we will rename the independent variables as IV1 to <code>r paste("IV", length(independent_variables), sep="")</code> when using CART):</p>
<pre lang="{r"><code># Name the variables numerically so that they look ok on the tree plots
independent_variables_nolabel = paste("IV", 1:length(independent_variables), sep="")

estimation_data_nolabel = cbind(estimation_data[,dependent_variable], estimation_data[,independent_variables])
colnames(estimation_data_nolabel)&lt;- c(colnames(estimation_data)[dependent_variable],independent_variables_nolabel)

validation_data_nolabel = cbind(validation_data[,dependent_variable], validation_data[,independent_variables])
colnames(validation_data_nolabel)&lt;- c(dependent_variable,independent_variables_nolabel)

test_data_nolabel = cbind(test_data[,dependent_variable], test_data[,independent_variables])
colnames(test_data_nolabel)&lt;- c(dependent_variable,independent_variables_nolabel)

estimation_data_nolabel = data.frame(estimation_data_nolabel)
validation_data_nolabel = data.frame(validation_data_nolabel)
test_data_nolabel = data.frame(test_data_nolabel)

formula=paste(colnames(estimation_data)[dependent_variable],paste(Reduce(paste,sapply(head(independent_variables_nolabel,-1), function(i) paste(i,"+",sep=""))),tail(independent_variables_nolabel,1),sep=""),sep="~")
CART_tree&lt;-rpart(formula, data= estimation_data_nolabel,method="class", control=CART_control)

rpart.plot(CART_tree, box.palette="OrBu", type=3, extra=1, fallen.leaves=F, branch.lty=3)
</code></pre>
<p>The leaves of the tree indicate the number of estimation data observations that "reach that leaf" that belong to each class. A perfect classification would only have data from one class in each of the tree leaves. However, such a perfect classification of the estimation data would most likely not be able to classify well out-of-sample data due to overfitting of the estimation data.</p>
<pre lang="{r"><code># Tree parameter
# Please ENTER the new tree (CART) complexity control cp 
CART_cp = 0.00068
</code></pre>
<p>One can estimate larger trees through changing the tree's <strong>complexity control</strong> parameter (in this case the rpart.control argument cp). For example, this is how the tree would look like if we set cp=<code>r toString(CART_cp)</code>:</p>
<pre lang="{r"><code>CART_tree_large&lt;-rpart(formula, data= estimation_data_nolabel,method="class", control=rpart.control(cp = CART_cp))
rpart.plot(CART_tree_large, box.palette="OrBu", type=3, extra=1, fallen.leaves=F, branch.lty=3)
</code></pre>
<p>One can also use the percentage of data in each leaf of the tree to get an estimate of the probability that an observation (e.g., customer) belongs to a given class. The <strong>purity of the leaf</strong> can indicate the probability that an observation that "reaches that leaf" belongs to a class. In our case, the probability our validation data belong to class 1 (i.e., a customer's likelihood of default) for the first few validation observations, using the first CART above, is:</p>
<pre lang="{r"><code># Let's first calculate all probabilites for the estimation, validation, and test data
estimation_Probability_class1_tree&lt;-predict(CART_tree, estimation_data_nolabel)[,2]
estimation_Probability_class1_tree_large&lt;-predict(CART_tree_large, estimation_data_nolabel)[,2]

validation_Probability_class1_tree&lt;-predict(CART_tree, validation_data_nolabel)[,2]
validation_Probability_class1_tree_large&lt;-predict(CART_tree_large, validation_data_nolabel)[,2]

test_Probability_class1_tree&lt;-predict(CART_tree, test_data_nolabel)[,2]
test_Probability_class1_tree_large&lt;-predict(CART_tree_large, test_data_nolabel)[,2]

estimation_prediction_class_tree=1*as.vector(estimation_Probability_class1_tree &gt; Probability_Threshold)
estimation_prediction_class_tree_large=1*as.vector(estimation_Probability_class1_tree_large &gt; Probability_Threshold)

validation_prediction_class_tree=1*as.vector(validation_Probability_class1_tree &gt; Probability_Threshold)
validation_prediction_class_tree_large=1*as.vector(validation_Probability_class1_tree_large &gt; Probability_Threshold)

test_prediction_class_tree=1*as.vector(test_Probability_class1_tree &gt; Probability_Threshold)
test_prediction_class_tree_large=1*as.vector(test_Probability_class1_tree_large &gt; Probability_Threshold)

Classification_Table=rbind(validation_data[,dependent_variable],validation_prediction_class_tree,validation_Probability_class1_tree)
rownames(Classification_Table)&lt;-c("Actual Class","Predicted Class","Probability of Class 1")
colnames(Classification_Table)&lt;- paste("Obs", 1:ncol(Classification_Table), sep=" ")

Classification_Table_large=rbind(validation_data[,dependent_variable],validation_prediction_class_tree_large,validation_Probability_class1_tree_large)
rownames(Classification_Table_large)&lt;-c("Actual Class","Predicted Class","Probability of Class 1")
colnames(Classification_Table_large)&lt;- paste("Obs", 1:ncol(Classification_Table_large), sep=" ")

knitr::kable(head(t(round(Classification_Table,2)), max_data_report))
</code></pre>
<p>The table above assumes that the <strong>probability threshold</strong> for considering an observations as "class 1" is <code>r Probability_Threshold</code>. In practice we need to select the probability threshold: this is an important choice that we will discuss below.</p>
<p><strong>Question:</strong></p>
<p>Run CART for complexity parameter cp=0.0001 or smaller. Is it practical to run? Is it practical to interpret? Do you trust the classifier?</p>
<p><strong>Answer:</strong></p>
<ul>
<li></li>
</ul>
<p>We have already discussed feature selection and complexity control for classification methods. In our case, we can see the relative importance of the independent variables using the <code>variable.importance</code> of the CART trees (see <code>help(rpart.object)</code> in R) or the z-scores from the output of logistic regression. For easier visualization, we scale all values between -1 and 1 (the scaling is done for each method separately - note that CART does not provide the sign of the "coefficients"). From this table we can see the <strong>key drivers</strong> of the classification according to each of the methods we used here.</p>
<pre lang="{r"><code>log_importance = tail(log_coefficients[,"z value", drop=F],-1) # remove the intercept
log_importance = log_importance/max(abs(log_importance))

tree_importance = CART_tree$variable.importance
tree_ordered_drivers = as.numeric(gsub("\\IV"," ",names(CART_tree$variable.importance)))
tree_importance_final = rep(0,length(independent_variables))
tree_importance_final[tree_ordered_drivers] &lt;- tree_importance
tree_importance_final &lt;- tree_importance_final/max(abs(tree_importance_final))
tree_importance_final &lt;- tree_importance_final*sign(log_importance)

large_tree_importance = CART_tree_large$variable.importance
large_tree_ordered_drivers = as.numeric(gsub("\\IV"," ",names(CART_tree_large$variable.importance)))
large_tree_importance_final = rep(0,length(independent_variables))
large_tree_importance_final[large_tree_ordered_drivers] &lt;- large_tree_importance
large_tree_importance_final &lt;- large_tree_importance_final/max(abs(large_tree_importance_final))
large_tree_importance_final &lt;- large_tree_importance_final*sign(log_importance)

Importance_table &lt;- cbind(log_importance,tree_importance_final,large_tree_importance_final)
colnames(Importance_table) &lt;- c("Logistic Regression", "CART 1", "CART 2")
rownames(Importance_table) &lt;- rownames(log_importance)
## printing the result in a clean-slate table
knitr::kable(round(Importance_table,2))
</code></pre>
<p>In general it is not necessary for all methods to agree on the most important drivers: when there is "major" disagreement, particularly among models that have satisfactory performance as discussed next, we may need to reconsider the overall analysis, including the objective of the analysis as well as the data used, as the results may not be robust. <strong>As always, interpreting and using the results of data analytics requires a balance between quantitative and qualitative analysis.</strong></p>
<h2><a href="#step-5-validation-accuracy" aria-hidden="true" class="anchor" id="user-content-step-5-validation-accuracy"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 5: Validation accuracy</h2>
<p>Using the predicted class probabilities of the validation data, as outlined above, we can  generate some measures of classification performance. Before discussing them, note that given the probability an observation belongs to a class, <strong>a reasonable class prediction choice is to predict the class that has the highest probability</strong>. However, this does not need to be the only choice in practice.</p>
<blockquote>
<p>Selecting the probability threshold based on which we predict the class of an observation is a decision the user needs to make. While in some cases a reasonable probability threshold is 50%, in other cases it may be 99.9% or 0.1%.</p>
</blockquote>
<p><strong>Question:</strong></p>
<ol>
<li>Can you think of such a scenario?</li>
<li>What probability threshold do you think would make sense in this case of credit card default classification?</li>
</ol>
<p><strong>Answer:</strong></p>
<ul>
<li></li>
<li></li>
</ul>
<p>For different choices of the probability threshold, one can measure a number of classification performance metrics, which are outlined next.</p>
<h3><a href="#1--hit-ratio" aria-hidden="true" class="anchor" id="user-content-1--hit-ratio"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>1.  Hit ratio</h3>
<p>This is the percentage of the observations that have been correctly classified (i.e., the predicted class and the actual class are the same). We can just count the number of the validation data correctly classified and divide this number with the total number of the validation data, using the two CART and the logistic regression above. These are as follows for probability threshold <code>r Probability_Threshold*100</code>%:</p>
<pre lang="{r"><code>validation_actual=validation_data[,dependent_variable]
validation_predictions = rbind(validation_prediction_class_log,
                               validation_prediction_class_tree,
                               validation_prediction_class_tree_large)
validation_hit_rates = rbind(
  100*sum(validation_prediction_class_log==validation_actual)/length(validation_actual),
  100*sum(validation_prediction_class_tree==validation_actual)/length(validation_actual), 
  100*sum(validation_prediction_class_tree_large==validation_actual)/length(validation_actual)
  )
colnames(validation_hit_rates) &lt;- "Hit Ratio"
rownames(validation_hit_rates) &lt;- c("Logistic Regression", "First CART", "Second CART")
knitr::kable(validation_hit_rates)
</code></pre>
<p>For the estimation data, the hit rates are:</p>
<pre lang="{r"><code>estimation_actual=estimation_data[,dependent_variable]
estimation_predictions = rbind(estimation_prediction_class_log,
                               estimation_prediction_class_tree,
                               estimation_prediction_class_tree_large)
estimation_hit_rates = rbind(
  100*sum(estimation_prediction_class_log==estimation_actual)/length(estimation_actual),
  100*sum(estimation_prediction_class_tree==estimation_actual)/length(estimation_actual), 
  100*sum(estimation_prediction_class_tree_large==estimation_actual)/length(estimation_actual)
  )
colnames(estimation_hit_rates) &lt;- "Hit Ratio"
rownames(estimation_hit_rates) &lt;- c("Logistic Regression","First CART", "Second CART")
knitr::kable(estimation_hit_rates)
</code></pre>
<p>A simple benchmark to compare the hit ratio performance of a classification model against is the <strong>Maximum Chance Criterion</strong>. This measures the proportion of the class with the largest size. For our validation data the largest group is customers who do not default: <code>r sum(!validation_actual)</code> out of <code>r length(validation_actual)</code> customers). Clearly, if we classified all individuals into the largest group, we could get a hit ratio of <code>r round(100*sum(!validation_actual)/length(validation_actual), 2)</code>% without doing any work. One should have a hit rate of at least as much as the Maximum Chance Criterion rate, although as we discuss next there are more performance criteria to consider.</p>
<h3><a href="#2-confusion-matrix" aria-hidden="true" class="anchor" id="user-content-2-confusion-matrix"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>2. Confusion matrix</h3>
<p>The confusion matrix shows for each class the number (or percentage) of the  data that are correctly classified for that class. For example, for the method above with the highest hit rate in the validation data (among logistic regression and the 2 CART models), and for probability threshold <code>r Probability_Threshold*100</code>%, the confusion matrix for the validation data is:</p>
<pre lang="{r"><code>validation_prediction_best = validation_predictions[which.max(validation_hit_rates),]
conf_matrix = matrix(rep(0,4),ncol=2)
conf_matrix[1,1]&lt;- 100*sum(validation_prediction_best*validation_data[,dependent_variable])/sum(validation_data[,dependent_variable])
conf_matrix[1,2]&lt;- 100*sum((!validation_prediction_best)*validation_data[,dependent_variable])/sum(validation_data[,dependent_variable])
conf_matrix[2,1]&lt;- 100*sum((validation_prediction_best)*(!validation_data[,dependent_variable]))/sum((!validation_data[,dependent_variable]))
conf_matrix[2,2]&lt;- 100*sum((!validation_prediction_best)*(!validation_data[,dependent_variable]))/sum((!validation_data[,dependent_variable]))
conf_matrix = round(conf_matrix,2)

colnames(conf_matrix) &lt;- c(paste("Predicted 1 (", class_1_interpretation, ")", sep = ""), paste("Predicted 0 (", class_0_interpretation, ")", sep = ""))
rownames(conf_matrix) &lt;- c(paste("Actual 1 (", class_1_interpretation, ")", sep = ""), paste("Actual 0 (", class_0_interpretation, ")", sep = ""))
knitr::kable(conf_matrix)
</code></pre>
<p><strong>Questions:</strong></p>
<ol>
<li>Note that the percentages add up to 100% for each row. Why?</li>
<li>Moreover, a "good" confusion matrix should have large diagonal values and small off-diagonal ones. Why?</li>
</ol>
<p><strong>Answers:</strong></p>
<ul>
<li></li>
<li></li>
</ul>
<h3><a href="#3-roc-curve" aria-hidden="true" class="anchor" id="user-content-3-roc-curve"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3. ROC curve</h3>
<p>Remember that each observation is classified by our model according to the probabilities Pr(0) and Pr(1) and a chosen probability threshold. Typically we set the probability threshold to 0.5 - so that observations for which Pr(1) &gt; 0.5 are classified as 1's. However, we can vary this threshold, for example if we are interested in correctly predicting all 1's but do not mind missing some 0's (and vice-versa).</p>
<p>When we change the probability threshold we get different values of hit rate, false positive and false negative rates, or any other performance metric. We can plot for example how the false positive versus true positive rates change as we alter the probability threshold, and generate the so called ROC curve.</p>
<p>The ROC curves for the validation data for the logistic regression as well as both the CARTs above are as follows:</p>
<pre lang="{r"><code>validation_actual_class &lt;- as.numeric(validation_data[,dependent_variable])

pred_tree &lt;- prediction(validation_Probability_class1_tree, validation_actual_class)
pred_tree_large &lt;- prediction(validation_Probability_class1_tree_large, validation_actual_class)
pred_log &lt;- prediction(validation_Probability_class1_log, validation_actual_class)

test1&lt;-performance(pred_tree, "tpr", "fpr")
df1&lt;- cbind(as.data.frame(test1@x.values),as.data.frame(test1@y.values))
colnames(df1) &lt;- c("False Positive rate CART 1", "True Positive rate CART 1")
plot1 &lt;- ggplot(df1, aes(x=`False Positive rate CART 1`, y=`True Positive rate CART 1`)) + geom_line()
test2&lt;-performance(pred_log, "tpr", "fpr")
df2&lt;- cbind(as.data.frame(test2@x.values),as.data.frame(test2@y.values))
colnames(df2) &lt;- c("False Positive rate log reg", "True Positive rate log reg")
plot2 &lt;- ggplot(df2, aes(x=`False Positive rate log reg`, y=`True Positive rate log reg`)) + geom_line()
test3&lt;-performance(pred_tree_large, "tpr", "fpr")
df3&lt;- cbind(as.data.frame(test3@x.values),as.data.frame(test3@y.values))
colnames(df3) &lt;- c("False Positive rate CART 2", "True Positive rate CART 2")
plot3 &lt;- ggplot(df3, aes(x=`False Positive rate CART 2`, y=`True Positive rate CART 2`)) + geom_line()

# We can plot the curves individually 
# grid.arrange(plot1, plot2, plot3)   # use `fig.height=7.5` for the grid plot

# But we are going to combine them instead
df.all &lt;- do.call(rbind, lapply(list(df1, df2, df3), function(df) {
  df &lt;- melt(df, id=1)
  df$variable &lt;- sub("True Positive rate ", "", df$variable)
  colnames(df)[1] &lt;- "False Positive rate"
  df
}))
ggplot(df.all, aes(x=`False Positive rate`, y=value, colour=variable)) + geom_line() + ylab("True Positive rate") + geom_abline(intercept = 0, slope = 1,linetype="dotted",colour="green")
</code></pre>
<p>How should a good ROC curve look like? A rule of thumb in assessing ROC curves is that the "higher" the curve (i.e., the closer it gets to the point with coordinates (0,1)), hence the larger the area under the curve, the better. You may also select one point on the ROC curve (the "best one" for our purpose) and use that false positive/false negative performances (and corresponding threshold for P(1)) to assess your model.</p>
<p><strong>Questions:</strong></p>
<ol>
<li>Which point on the ROC would you select?</li>
<li>What classifier does the dotted 45-degree line correspond to? How does the ROC plot above showcase that the logistic regression and CART classifiers are superior to such classifier?</li>
</ol>
<p><strong>Answers:</strong></p>
<ul>
<li></li>
<li></li>
</ul>
<h3><a href="#4-gains-chart" aria-hidden="true" class="anchor" id="user-content-4-gains-chart"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>4. Gains chart</h3>
<p>The gains chart is a popular technique in certain applications, such as direct marketing or credit risk.</p>
<p>For a concrete example, consider the case of a direct marketing mailing campaign. Say we have a classifier that attempts to identify the likely responders by assigning each case a probability of response. We may want to select as few cases as possible and still capture the maximum number of responders possible.</p>
<p>We can measure the percentage of all responses the classifier captures if we only select, say, x% of cases: the top x% in terms of the probability of response assigned by our classifier. For each percentage of cases we select (x), we can plot the following point: the x-coordinate will be the percentage of all cases that were selected, while the y-coordinate will be the percentage of all class 1 cases that were captured within the selected cases (i.e., the ratio true positives/positives of the classifier, assuming the classifier predicts class 1 for all the selected cases, and predicts class 0 for all the remaining cases). If we plot these points while we change the percentage of cases we select (x) (i.e., while we change the probability threshold of the classifier), we get a chart that is called the <strong>gains chart</strong>.</p>
<p>In the credit card default case we are studying, the gains charts for the validation data for our three classifiers are the following:</p>
<pre lang="{r"><code>validation_actual &lt;- validation_data[,dependent_variable]
all1s &lt;- sum(validation_actual); 

probs &lt;- validation_Probability_class1_tree
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- 100*Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  c(length(useonly)/length(validation_actual), sum(validation_actual[useonly])/all1s) 
}))
frame1 &lt;- data.frame(
  `CART 1 % of validation data` = res[1,],
  `CART 1 % of class 1` = res[2,],
  check.names = FALSE
)
plot1 &lt;- ggplot(frame1, aes(x=`CART 1 % of validation data`, y=`CART 1 % of class 1`)) + geom_line()

probs &lt;- validation_Probability_class1_tree_large
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- 100*Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  c(length(useonly)/length(validation_actual), sum(validation_actual[useonly])/all1s) 
}))
frame2 &lt;- data.frame(
  `CART 2 % of validation data` = res[1,],
  `CART 2 % of class 1` = res[2,],
  check.names = FALSE
)
plot2 &lt;- ggplot(frame2, aes(x=`CART 2 % of validation data`, y=`CART 2 % of class 1`)) + geom_line()

probs &lt;- validation_Probability_class1_log
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- 100*Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  c(length(useonly)/length(validation_actual), sum(validation_actual[useonly])/all1s) 
}))
frame3 &lt;- data.frame(
  `log reg % of validation data` = res[1,],
  `log reg % of class 1` = res[2,],
  check.names = FALSE
)
plot3 &lt;- ggplot(frame3, aes(x=`log reg % of validation data`, y=`log reg % of class 1`)) + geom_line()

# We can plot the curves individually
# grid.arrange(plot1, plot2, plot3)   # use `fig.height=7.5` for the grid plot

# But we are going to combine them instead
df.all &lt;- do.call(rbind, lapply(list(frame1, frame2, frame3), function(df) {
  df &lt;- melt(df, id=1)
  df$variable &lt;- sub(" % of class 1", "", df$variable)
  colnames(df)[1] &lt;- "% of validation data selected"
  df
}))
ggplot(df.all, aes(x=`% of validation data selected`, y=value, colour=variable)) + geom_line() + ylab("% of class 1 captured") + geom_abline(intercept = 0, slope = 1,linetype="dotted",colour="green")
</code></pre>
<p>Notice that if we were to examine cases selecting them at random, instead of selecting the "best" ones using an informed classifier, the "random prediction" gains chart would be a straight 45-degree line.</p>
<p><strong>Question:</strong></p>
<p>Why?</p>
<p><strong>Answer:</strong></p>
<ul>
<li></li>
</ul>
<p>So how should a good gains chart look like? The further above this 45-degree reference line our gains curve is, the better the "gains". Moreover, much like for the ROC curve, one can select the percentage of all cases examined appropriately so that any point of the gains curve is selected.</p>
<p><strong>Question:</strong></p>
<p>Which point on the gains curve should we select in practice?</p>
<p><strong>Answer:</strong></p>
<ul>
<li></li>
</ul>
<h3><a href="#5-profit-curve" aria-hidden="true" class="anchor" id="user-content-5-profit-curve"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>5. Profit curve</h3>
<p>Finally, we can generate the so called profit curve, which we often use to make our final decisions. The intuition is as follows. Consider a direct marketing campaign, and suppose it costs $1 to send an advertisement, and the expected profit from a person who responds positively is $45. Suppose you have a database of 1 million people to whom you could potentially send the promotion. Typical response rates are 0.05%. What fraction of the 1 million people should you send the promotion to?</p>
<p>To answer this type of questions, we need to create the <strong>profit curve</strong>. We can measure some measure of profit if we only select the top cases in terms of the probability of response assigned by our classifier. We can plot the profit curve by changing, as we did for the gains chart, the percentage of cases we select, and calculating the corresponding total <strong>estimated profit</strong> (or loss) we would generate. This is simply equal to:</p>
<blockquote>
<p>Total Estimated Profit = (% of 1's correctly predicted)x(value of capturing a 1) + (% of 0's correctly predicted)x(value of capturing a 0) + (% of 1's incorrectly predicted as 0)x(cost of missing a 1) + (% of 0's incorrectly predicted as 1)x(cost of missing a 0)</p>
<p>Calculating the expected profit requires we have an estimate of the four costs/values: the value of capturing a 1 or a 0, and the cost of misclassifying a 1 into a 0 or vice versa.</p>
</blockquote>
<p>Given the values and costs of correct classifications and misclassifications, we can plot the total estimated profit (or loss) as we change the percentage of cases we select, i.e., the probability threshold of the classifier, like we did for the ROC and the gains chart.</p>
<p>In our credit card default case, we consider the following business profit and loss to the credit card issuer for the correctly classified and misclassified customers:</p>
<pre lang="{r"><code>knitr::kable(Profit_Matrix)
</code></pre>
<p>Based on these profit and cost estimates, the profit curves for the validation data for the three classifiers are:</p>
<pre lang="{r"><code>actual_class &lt;- validation_data[,dependent_variable]

probs &lt;- validation_Probability_class1_tree
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  predict_class &lt;- 1*(probs &gt;= prob)
  theprofit &lt;- Profit_Matrix[1,1]*sum(actual_class==1 &amp; predict_class==1)+
    Profit_Matrix[1,2]*sum(actual_class==1 &amp; predict_class==0)+
    Profit_Matrix[2,1]*sum(actual_class==0 &amp; predict_class==1)+
    Profit_Matrix[2,2]*sum(actual_class==0 &amp; predict_class==0)
  c(100*length(useonly)/length(actual_class), theprofit) 
}))
frame1 &lt;- data.frame(
  `CART 1 % selected` = res[1,],
  `CART 1 est. profit` = res[2,],
  check.names = FALSE
)
plot1 &lt;- ggplot(frame1, aes(x=`CART 1 % selected`, y=`CART 1 est. profit`)) + geom_line()

probs &lt;- validation_Probability_class1_tree_large
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  predict_class &lt;- 1*(probs &gt;= prob)
  theprofit &lt;- Profit_Matrix[1,1]*sum(actual_class==1 &amp; predict_class==1)+
    Profit_Matrix[1,2]*sum(actual_class==1 &amp; predict_class==0)+
    Profit_Matrix[2,1]*sum(actual_class==0 &amp; predict_class==1)+
    Profit_Matrix[2,2]*sum(actual_class==0 &amp; predict_class==0)
  c(100*length(useonly)/length(actual_class), theprofit) 
}))
frame2 &lt;- data.frame(
  `CART 2 % selected` = res[1,],
  `CART 2 est. profit` = res[2,],
  check.names = FALSE
)
plot2 &lt;- ggplot(frame2, aes(x=`CART 2 % selected`, y=`CART 2 est. profit`)) + geom_line()

probs &lt;- validation_Probability_class1_log
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  predict_class &lt;- 1*(probs &gt;= prob)
  theprofit &lt;- Profit_Matrix[1,1]*sum(actual_class==1 &amp; predict_class==1)+
    Profit_Matrix[1,2]*sum(actual_class==1 &amp; predict_class==0)+
    Profit_Matrix[2,1]*sum(actual_class==0 &amp; predict_class==1)+
    Profit_Matrix[2,2]*sum(actual_class==0 &amp; predict_class==0)
  c(100*length(useonly)/length(actual_class), theprofit) 
}))
frame3 &lt;- data.frame(
  `log reg % selected` = res[1,],
  `log reg est. profit` = res[2,],
  check.names = FALSE
)
plot3 &lt;- ggplot(frame3, aes(x=`log reg % selected`, y=`log reg est. profit`)) + geom_line()

# we can plot the curves individually 
# grid.arrange(plot1, plot2, plot3)   # use `fig.height=7.5` for the grid plot

# But we're going to combine them instead
df.all &lt;- do.call(rbind, lapply(list(frame1, frame2, frame3), function(df) {
  df &lt;- melt(df, id=1)
  df$variable &lt;- sub(" est. profit", "", df$variable)
  colnames(df)[1] &lt;- "% of validation data selected"
  df
}))
ggplot(df.all, aes(x=`% of validation data selected`, y=value, colour=variable)) + geom_line() + ylab("Estimated profit")
</code></pre>
<p>We can then select the percentage of selected cases that corresponds to the maximum estimated profit (or minimum loss, if necessary).</p>
<p><strong>Question:</strong></p>
<p>Which point on the profit curve would you select in practice?</p>
<p><strong>Answer:</strong></p>
<ul>
<li></li>
</ul>
<p>Notice that to maximize estimated profit, we need to have the cost/profit for each of the four cases! This can be difficult to assess, hence typically we want to do a sensitivity analysis to our assumptions about the cost/profit. For example, we can generate different profit curves (i.e., worst case, best case, average case scenarios) and see how much the best profit we get varies, and most importantly <strong>how our selection of the classification model and of the probability threshold corresponding to the best profit vary</strong>, as the classifier and the percentage of cases are what we need to decide on eventually.</p>
<h2><a href="#step-6-test-accuracy" aria-hidden="true" class="anchor" id="user-content-step-6-test-accuracy"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Step 6. Test Accuracy</h2>
<p>Having iterated steps 2-5 until we are satisfied with the performance of our selected model on the validation data, in this step the performance analysis outlined in step 5 needs to be done with the test sample. This is the performance that best mimics what one should expect in practice upon deployment of the classification solution, <strong>assuming (as always) that the data used for this performance analysis are representative of the situation in which the solution will be deployed.</strong></p>
<p>Let's see in our case how the <strong>hit ratio, confusion matrix, ROC curve, gains chart, and profit curve</strong> look like for our test data. For the hit ratio and the confusion matrix we use <code>r Probability_Threshold*100</code>% as the probability threshold for classification.</p>
<pre lang="{r"><code>######for train data#####
test_actual=test_data[,dependent_variable]
test_predictions = rbind(test_prediction_class_log,
                         test_prediction_class_tree,
                         test_prediction_class_tree_large
                         )
test_hit_rates = rbind(
  100*sum(test_prediction_class_log==test_actual)/length(test_actual),
  100*sum(test_prediction_class_tree==test_actual)/length(test_actual), 
  100*sum(test_prediction_class_tree_large==test_actual)/length(test_actual)
  )
colnames(test_hit_rates) &lt;- "Hit Ratio"
rownames(test_hit_rates) &lt;- c("Logistic Regression","First CART", "Second CART")

knitr::kable(test_hit_rates)
</code></pre>
<p>The confusion matrix for the model with the best test data hit ratio above:</p>
<pre lang="{r"><code>test_prediction_best = test_predictions[which.max(test_hit_rates),]
conf_matrix = matrix(rep(0,4),ncol=2)
conf_matrix[1,1]&lt;- 100*sum(test_prediction_best*test_data[,dependent_variable])/sum(test_data[,dependent_variable])
conf_matrix[1,2]&lt;- 100*sum((!test_prediction_best)*test_data[,dependent_variable])/sum(test_data[,dependent_variable])
conf_matrix[2,1]&lt;- 100*sum((test_prediction_best)*(!test_data[,dependent_variable]))/sum((!test_data[,dependent_variable]))
conf_matrix[2,2]&lt;- 100*sum((!test_prediction_best)*(!test_data[,dependent_variable]))/sum((!test_data[,dependent_variable]))
conf_matrix = round(conf_matrix,2)

colnames(conf_matrix) &lt;- c(paste("Predicted 1 (", class_1_interpretation, ")", sep = ""), paste("Predicted 0 (", class_0_interpretation, ")", sep = ""))
rownames(conf_matrix) &lt;- c(paste("Actual 1 (", class_1_interpretation, ")", sep = ""), paste("Actual 0 (", class_0_interpretation, ")", sep = ""))
knitr::kable(conf_matrix)
</code></pre>
<p>ROC curves for the test data:</p>
<pre lang="{r"><code>test_actual_class &lt;- as.numeric(test_data[,dependent_variable])

pred_tree_test &lt;- prediction(test_Probability_class1_tree, test_actual_class)
pred_tree_large_test &lt;- prediction(test_Probability_class1_tree_large, test_actual_class)
pred_log_test &lt;- prediction(test_Probability_class1_log, test_actual_class)

test&lt;-performance(pred_tree_test, "tpr", "fpr")
df1&lt;- cbind(as.data.frame(test@x.values),as.data.frame(test@y.values))
colnames(df1) &lt;- c("False Positive rate CART 1", "True Positive CART 1")
test2&lt;-performance(pred_tree_large_test, "tpr", "fpr")
df2&lt;- cbind(as.data.frame(test2@x.values),as.data.frame(test2@y.values))
colnames(df2) &lt;- c("False Positive rate CART 2", "True Positive CART 2")
test3&lt;-performance(pred_log_test, "tpr", "fpr")
df3&lt;- cbind(as.data.frame(test3@x.values),as.data.frame(test3@y.values))
colnames(df3) &lt;- c("False Positive rate log reg", "True Positive log reg")

df.all &lt;- do.call(rbind, lapply(list(df1, df2, df3), function(df) {
  df &lt;- melt(df, id=1)
  df$variable &lt;- sub("True Positive ", "", df$variable)
  colnames(df)[1] &lt;- "False Positive rate"
  df
}))
ggplot(df.all, aes(x=`False Positive rate`, y=value, colour=variable)) + geom_line() + ylab("True Positive rate") + geom_abline(intercept = 0, slope = 1,linetype="dotted",colour="green")
</code></pre>
<p>Gains chart for the test data:</p>
<pre lang="{r"><code>test_actual &lt;- test_data[,dependent_variable]
all1s &lt;- sum(test_actual)

probs &lt;- test_Probability_class1_tree
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- 100*Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  c(length(useonly)/length(test_actual), sum(test_actual[useonly])/all1s) 
}))
frame1 &lt;- data.frame(
  `CART 1 % of validation data` = res[1,],
  `CART 1 % of class 1` = res[2,],
  check.names = FALSE
)

probs &lt;- test_Probability_class1_tree_large
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- 100*Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  c(length(useonly)/length(test_actual), sum(test_actual[useonly])/all1s) 
}))
frame2 &lt;- data.frame(
  `CART 2 % of validation data` = res[1,],
  `CART 2 % of class 1` = res[2,],
  check.names = FALSE
)

probs &lt;- test_Probability_class1_log
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- 100*Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  c(length(useonly)/length(test_actual), sum(test_actual[useonly])/all1s) 
  }))
frame3 &lt;- data.frame(
  `log reg % of validation data` = res[1,],
  `log reg % of class 1` = res[2,],
  check.names = FALSE
)

df.all &lt;- do.call(rbind, lapply(list(frame1, frame2, frame3), function(df) {
  df &lt;- melt(df, id=1)
  df$variable &lt;- sub(" % of class 1", "", df$variable)
  colnames(df)[1] &lt;- "% of test data selected"
  df
}))
ggplot(df.all, aes(x=`% of test data selected`, y=value, colour=variable)) + geom_line() + ylab("% of class 1 captured") + geom_abline(intercept = 0, slope = 1,linetype="dotted",colour="green")
</code></pre>
<p>Finally the profit curves for the test data, using the same profit/cost estimates as we did above:</p>
<pre lang="{r"><code>actual_class&lt;- test_data[,dependent_variable]

probs &lt;- test_Probability_class1_tree
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  predict_class &lt;- 1*(probs &gt;= prob)
  theprofit &lt;- Profit_Matrix[1,1]*sum(actual_class==1 &amp; predict_class==1)+
    Profit_Matrix[1,2]*sum(actual_class==1 &amp; predict_class==0)+
    Profit_Matrix[2,1]*sum(actual_class==0 &amp; predict_class==1)+
    Profit_Matrix[2,2]*sum(actual_class==0 &amp; predict_class==0)
  c(100*length(useonly)/length(actual_class), theprofit) 
}))
frame1 &lt;- data.frame(
  `CART 1 % selected` = res[1,],
  `CART 1 est. profit` = res[2,],
  check.names = FALSE
)

probs &lt;- test_Probability_class1_tree_large
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  predict_class &lt;- 1*(probs &gt;= prob)
  theprofit &lt;- Profit_Matrix[1,1]*sum(actual_class==1 &amp; predict_class==1)+
    Profit_Matrix[1,2]*sum(actual_class==1 &amp; predict_class==0)+
    Profit_Matrix[2,1]*sum(actual_class==0 &amp; predict_class==1)+
    Profit_Matrix[2,2]*sum(actual_class==0 &amp; predict_class==0)
  c(100*length(useonly)/length(actual_class), theprofit) 
}))
frame2 &lt;- data.frame(
  `CART 2 % selected` = res[1,],
  `CART 2 est. profit` = res[2,],
  check.names = FALSE
)

probs &lt;- test_Probability_class1_log
xaxis &lt;- sort(unique(c(0,1,probs)), decreasing = TRUE)
res &lt;- Reduce(cbind,lapply(xaxis, function(prob){
  useonly &lt;- which(probs &gt;= prob)
  predict_class &lt;- 1*(probs &gt;= prob)
  theprofit &lt;- Profit_Matrix[1,1]*sum(actual_class==1 &amp; predict_class==1)+
    Profit_Matrix[1,2]*sum(actual_class==1 &amp; predict_class==0)+
    Profit_Matrix[2,1]*sum(actual_class==0 &amp; predict_class==1)+
    Profit_Matrix[2,2]*sum(actual_class==0 &amp; predict_class==0)
  c(100*length(useonly)/length(actual_class), theprofit) 
}))
frame3 &lt;- data.frame(
  `log reg % selected` = res[1,],
  `log reg est. profit` = res[2,],
  check.names = FALSE
)

df.all &lt;- do.call(rbind, lapply(list(frame1, frame2, frame3), function(df) {
  df &lt;- melt(df, id=1)
  df$variable &lt;- sub(" est. profit", "", df$variable)
  colnames(df)[1] &lt;- "% of test data selected"
  df
}))
ggplot(df.all, aes(x=`% of test data selected`, y=value, colour=variable)) + geom_line() + ylab("Estimated profit")
</code></pre>
<p><strong>Questions:</strong></p>
<ol>
<li>Is the performance in the test data similar to the performance in the validation data above? Should we expect the performance of our classification model to be close to that in our test data when we deploy the model in practice? Why or why not? What should we do if they are different?</li>
<li>Make a final assessment about what classifier you would use (out of the ones considered here) for this credit card default classification business problem, with what percentage of cases/probability threshold, and why. What is the business profit the company can achieve (as measured with the test data) based on your solution?</li>
<li>How does your assessment depend on the values and costs of correct classifications and misclassifications (<code>r actual_1_predict_1</code>, <code>r actual_1_predict_0</code>, <code>r actual_0_predict_1</code>, <code>r actual_0_predict_0</code>)?</li>
<li>What business decisions can the credit card issuer make based on this analysis?</li>
</ol>
<p><strong>Answers:</strong></p>
<ul>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>
</article>
  </div>

  </div>

  <button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="d-none">Jump to Line</button>
  <div id="jump-to-line" style="display:none">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
      <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
      <button type="submit" class="btn">Go</button>
</form>  </div>


  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

      
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between py-6 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">&copy; 2018 <span title="0.22301s from unicorn-2743047406-qbspf">GitHub</span>, Inc.</li>
        <li class="mr-3"><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li class="mr-3"><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li>
    </ul>

    <a href="https://github.com" aria-label="Homepage" class="footer-octicon" title="GitHub">
      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" version="1.1" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
    <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>

    </ul>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
    You can't perform that action at this time.
  </div>


    
    <script crossorigin="anonymous" integrity="sha512-jqvDaL8uGENbC1rsifCdxmfE5RQmxtizkQ1xMGfvpSbwdKnG1vYz/z/BKuMEtJxU7/cY0IFKZlpgmUrMPtu4oQ==" src="https://assets-cdn.github.com/assets/frameworks-8eabc368bf2e.js" type="application/javascript"></script>
    
    <script async="async" crossorigin="anonymous" integrity="sha512-Nne+tGLP7Wem6CMvuPj7QWV/i5ki/583N+XIx/2GKn3zEWNYcs3hVedKWowFbuvzcYvAvJhkV+/At9eAswRLUw==" src="https://assets-cdn.github.com/assets/github-3677beb462cf.js" type="application/javascript"></script>
    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
  </div>
</div>


  </body>
</html>

